--- a/drivers/misc/Kconfig	2009-09-02 16:48:02.000000000 +0200
+++ b/drivers/misc/Kconfig	2009-09-21 22:06:56.000000000 +0200
@@ -233,6 +233,17 @@
 	  This driver can also be built as a module.  If so, the module
 	  will be called isl29003.
 
+config JZ4740_ADC
+	tristate "Ingenic JZ4720/JZ4740 SoC ADC driver"
+	depends on SOC_JZ4740
+    help
+      If you say yes here you get support for the Ingenic JZ4720/JZ4740 SoC ADC
+      core. It is required for the JZ4720/JZ4740 battery and touchscreen driver
+      and is used to synchronize access to the adc core between those two.
+
+      This driver can also be build as a module. If so, the module will be
+      called jz4740-adc.
+
 source "drivers/misc/c2port/Kconfig"
 source "drivers/misc/eeprom/Kconfig"
 source "drivers/misc/cb710/Kconfig"
--- a/linux-2.6/drivers/misc/Makefile	2009-09-02 16:48:02.000000000 +0200
+++ b/drivers/misc/Makefile	2009-09-21 16:47:41.000000000 +0200
@@ -20,5 +20,6 @@
 obj-$(CONFIG_HP_ILO)		+= hpilo.o
 obj-$(CONFIG_ISL29003)		+= isl29003.o
 obj-$(CONFIG_C2PORT)		+= c2port/
+obj-$(CONFIG_JZ4740_ADC)	+= jz4740-adc.o
 obj-y				+= eeprom/
 obj-y				+= cb710/
